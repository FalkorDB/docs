<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(8) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(8) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(8) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(8) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(8) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script async src="https://www.googletagmanager.com/gtag/js?id=G-0V4CX90653"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-0V4CX90653'); </script> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>MATCH | FalkorDB Docs</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="MATCH" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Match describes the relationship between queried entities, using ascii art to represent pattern(s) to match against." /> <meta property="og:description" content="Match describes the relationship between queried entities, using ascii art to represent pattern(s) to match against." /> <link rel="canonical" href="https://docs.falkordb.com/cypher/match.html" /> <meta property="og:url" content="https://docs.falkordb.com/cypher/match.html" /> <meta property="og:site_name" content="FalkorDB Docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="MATCH" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Match describes the relationship between queried entities, using ascii art to represent pattern(s) to match against.","headline":"MATCH","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.falkordb.com/images/falkor-logo.png"}},"url":"https://docs.falkordb.com/cypher/match.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="FalkorDB Docs"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/configuration.html" class="nav-list-link">Configuration Parameters</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Commands category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/commands/" class="nav-list-link">Commands</a><ul class="nav-list"><li class="nav-list-item"><a href="/commands/graph.query.html" class="nav-list-link">GRAPH.QUERY</a></li><li class="nav-list-item"><a href="/commands/graph.ro_query.html" class="nav-list-link">GRAPH.RO_QUERY</a></li><li class="nav-list-item"><a href="/commands/graph.delete.html" class="nav-list-link">GRAPH.DELETE</a></li><li class="nav-list-item"><a href="/commands/graph.explain.html" class="nav-list-link">GRAPH.EXPLAIN</a></li><li class="nav-list-item"><a href="/commands/graph.list.html" class="nav-list-link">GRAPH.LIST</a></li><li class="nav-list-item"><a href="/commands/graph.profile.html" class="nav-list-link">GRAPH.PROFILE</a></li><li class="nav-list-item"><a href="/commands/graph.config-get.html" class="nav-list-link">GRAPH.CONFIG-GET</a></li><li class="nav-list-item"><a href="/commands/graph.config-set.html" class="nav-list-link">GRAPH.CONFIG-SET</a></li><li class="nav-list-item"><a href="/commands/graph.constraint-create.html" class="nav-list-link">GRAPH.CONSTRAINT CREATE</a></li><li class="nav-list-item"><a href="/commands/graph.constraint-drop.html" class="nav-list-link">GRAPH.CONSTRAINT DROP</a></li><li class="nav-list-item"><a href="/commands/graph.copy.html" class="nav-list-link">GRAPH.COPY</a></li><li class="nav-list-item"><a href="/commands/graph.info.html" class="nav-list-link">GRAPH.INFO</a></li><li class="nav-list-item"><a href="/commands/graph.slowlog.html" class="nav-list-link">GRAPH.SLOWLOG</a></li></ul></li><li class="nav-list-item"><a href="/clients.html" class="nav-list-link">Client Libraries</a></li><li class="nav-list-item"><a href="/datatypes.html" class="nav-list-link">Data types</a></li><li class="nav-list-item"><a href="/path_algorithm.html" class="nav-list-link">Path algorithms</a></li><li class="nav-list-item"><a href="/docker-examples/README.html" class="nav-list-link">Building Docker</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cypher Language category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/cypher/" class="nav-list-link">Cypher Language</a><ul class="nav-list"><li class="nav-list-item"><a href="/cypher/match.html" class="nav-list-link">MATCH</a></li><li class="nav-list-item"><a href="/cypher/optional_match.html" class="nav-list-link">OPTIONAL MATCH</a></li><li class="nav-list-item"><a href="/cypher/where.html" class="nav-list-link">WHERE</a></li><li class="nav-list-item"><a href="/cypher/return.html" class="nav-list-link">RETURN</a></li><li class="nav-list-item"><a href="/cypher/order_by.html" class="nav-list-link">ORDER BY</a></li><li class="nav-list-item"><a href="/cypher/skip.html" class="nav-list-link">SKIP</a></li><li class="nav-list-item"><a href="/cypher/limit.html" class="nav-list-link">LIMIT</a></li><li class="nav-list-item"><a href="/cypher/create.html" class="nav-list-link">CREATE</a></li><li class="nav-list-item"><a href="/cypher/delete.html" class="nav-list-link">DELETE</a></li><li class="nav-list-item"><a href="/cypher/set.html" class="nav-list-link">SET</a></li><li class="nav-list-item"><a href="/cypher/merge.html" class="nav-list-link">MERGE</a></li><li class="nav-list-item"><a href="/cypher/with.html" class="nav-list-link">WITH</a></li><li class="nav-list-item"><a href="/cypher/union.html" class="nav-list-link">UNION</a></li><li class="nav-list-item"><a href="/cypher/unwind.html" class="nav-list-link">UNWIND</a></li><li class="nav-list-item"><a href="/cypher/foreach.html" class="nav-list-link">FOREACH</a></li><li class="nav-list-item"><a href="/cypher/call.html" class="nav-list-link">CALL</a></li><li class="nav-list-item"><a href="/cypher/functions.html" class="nav-list-link">Functions</a></li><li class="nav-list-item"><a href="/cypher/procedures.html" class="nav-list-link">Procedures</a></li><li class="nav-list-item"><a href="/cypher/algorithms.html" class="nav-list-link">Algorithms</a></li><li class="nav-list-item"><a href="/cypher/indexing.html" class="nav-list-link">Indexing</a></li><li class="nav-list-item"><a href="/cypher/cypher_support.html" class="nav-list-link">Cypher coverage</a></li><li class="nav-list-item"><a href="/cypher/known_limitations.html" class="nav-list-link">Known limitations</a></li></ul></li><li class="nav-list-item"><a href="/llm_support.html" class="nav-list-link">LLM frameworks support</a></li><li class="nav-list-item"><a href="/bolt_support.html" class="nav-list-link">BOLT protocol support</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Operations category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/operations/" class="nav-list-link">Operations</a><ul class="nav-list"><li class="nav-list-item"><a href="/operations/persistence.html" class="nav-list-link">Persistence</a></li><li class="nav-list-item"><a href="/operations/replication.html" class="nav-list-link">Replication</a></li><li class="nav-list-item"><a href="/operations/cluster.html" class="nav-list-link">Cluster</a></li><li class="nav-list-item"><a href="/operations/k8s_support.html" class="nav-list-link">Kubernetes support</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Management category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/management/" class="nav-list-link">Management</a><ul class="nav-list"><li class="nav-list-item"><a href="/management/persistence.html" class="nav-list-link">Persistence</a></li></ul></li><li class="nav-list-item"><a href="/redisgraph-to-falkordb.html" class="nav-list-link">RedisGraph to FalkorDB</a></li><li class="nav-list-item"><a href="/References.html" class="nav-list-link">References</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The FalkorDB Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/design/" class="nav-list-link">The FalkorDB Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/design/client_spec.html" class="nav-list-link">Client Specification</a></li><li class="nav-list-item"><a href="/design/bulk_spec.html" class="nav-list-link">GRAPH.BULK endpoint specification</a></li><li class="nav-list-item"><a href="/design/result_structure.html" class="nav-list-link">Result Set Structure</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search FalkorDB Docs" aria-label="Search FalkorDB Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/falkordb/docs" class="site-button" target="_blank" rel="noopener noreferrer" > Docs Repository </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/falkordb/falkordb" class="site-button" target="_blank" rel="noopener noreferrer" > FalkorDB Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/cypher/">Cypher Language</a></li> <li class="breadcrumb-nav-list-item"><span>MATCH</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="match"> <a href="#match" class="anchor-heading" aria-labelledby="match"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MATCH </h1> <p>Match describes the relationship between queried entities, using ascii art to represent pattern(s) to match against.</p> <p>Nodes are represented by parentheses <code class="language-plaintext highlighter-rouge">()</code>, and Relationships are represented by brackets <code class="language-plaintext highlighter-rouge">[]</code>.</p> <p>Each graph entity node/relationship can contain an alias and a label/relationship type, but both can be left empty if necessary.</p> <p>Entity structure: <code class="language-plaintext highlighter-rouge">alias:label {filters}</code>.</p> <p>Alias, label/relationship type, and filters are all optional.</p> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>a:Actor<span class="o">)</span>-[:ACT]-&gt;<span class="o">(</span>m:Movie <span class="o">{</span>title:<span class="s2">"straight outta compton"</span><span class="o">})</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">a</code> is an alias for the source node, which we’ll be able to refer to at different places within our query.</p> <p><code class="language-plaintext highlighter-rouge">Actor</code> is the label under which this node is marked.</p> <p><code class="language-plaintext highlighter-rouge">ACT</code> is the relationship type.</p> <p><code class="language-plaintext highlighter-rouge">m</code> is an alias for the destination node.</p> <p><code class="language-plaintext highlighter-rouge">Movie</code> destination node is of “type” movie.</p> <p><code class="language-plaintext highlighter-rouge">{title:"straight outta compton"}</code> requires the node’s title attribute to equal “straight outta compton”.</p> <p>In this example, we’re interested in actor entities which have the relation “act” with <strong>the</strong> entity representing the “straight outta compton” movie.</p> <p>It is possible to describe broader relationships by composing a multi-hop query such as:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>me <span class="o">{</span>name:<span class="s1">'swilly'</span><span class="o">})</span>-[:FRIENDS_WITH]-&gt;<span class="o">()</span>-[:FRIENDS_WITH]-&gt;<span class="o">(</span>foaf<span class="o">)</span>
</code></pre></div></div> <p>Here we’re interested in finding out who my friends’ friends are.</p> <p>Nodes can have more than one relationship coming in or out of them, for instance:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>me <span class="o">{</span>name:<span class="s1">'swilly'</span><span class="o">})</span>-[:VISITED]-&gt;<span class="o">(</span>c:Country<span class="o">)</span>&lt;-[:VISITED]-<span class="o">(</span>friend<span class="o">)</span>&lt;-[:FRIENDS_WITH]-<span class="o">(</span>me<span class="o">)</span>
</code></pre></div></div> <p>Here we’re interested in knowing which of my friends have visited at least one country I’ve been to.</p> <h2 id="variable-length-relationships"> <a href="#variable-length-relationships" class="anchor-heading" aria-labelledby="variable-length-relationships"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Variable length relationships </h2> <p>Nodes that are a variable number of relationship→node hops away can be found using the following syntax:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[:TYPE<span class="k">*</span>minHops..maxHops]-&gt;
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">TYPE</code>, <code class="language-plaintext highlighter-rouge">minHops</code> and <code class="language-plaintext highlighter-rouge">maxHops</code> are all optional and default to type agnostic, 1 and infinity, respectively.</p> <p>When no bounds are given the dots may be omitted. The dots may also be omitted when setting only one bound and this implies a fixed length pattern.</p> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"MATCH (charlie:Actor { name: 'Charlie Sheen' })-[:PLAYED_WITH*1..3]-&gt;(colleague:Actor)
RETURN colleague"</span>
</code></pre></div></div> <p>Returns all actors related to ‘Charlie Sheen’ by 1 to 3 hops.</p> <h2 id="bidirectional-path-traversal"> <a href="#bidirectional-path-traversal" class="anchor-heading" aria-labelledby="bidirectional-path-traversal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bidirectional path traversal </h2> <p>If a relationship pattern does not specify a direction, it will match regardless of which node is the source and which is the destination:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[:TYPE]-
</code></pre></div></div> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"MATCH (person_a:Person)-[:KNOWS]-(person_b:Person)
RETURN person_a, person_b"</span>
</code></pre></div></div> <p>Returns all pairs of people connected by a <code class="language-plaintext highlighter-rouge">KNOWS</code> relationship. Note that each pair will be returned twice, once with each node in the <code class="language-plaintext highlighter-rouge">person_a</code> field and once in the <code class="language-plaintext highlighter-rouge">person_b</code> field.</p> <p>The syntactic sugar <code class="language-plaintext highlighter-rouge">(person_a)&lt;-[:KNOWS]-&gt;(person_b)</code> will return the same results.</p> <p>The bracketed edge description can be omitted if all relations should be considered: <code class="language-plaintext highlighter-rouge">(person_a)--(person_b)</code>.</p> <h2 id="named-paths"> <a href="#named-paths" class="anchor-heading" aria-labelledby="named-paths"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Named paths </h2> <p>Named path variables are created by assigning a path in a MATCH clause to a single alias with the syntax: <code class="language-plaintext highlighter-rouge">MATCH named_path = (path)-[to]-&gt;(capture)</code></p> <p>The named path includes all entities in the path, regardless of whether they have been explicitly aliased. Named paths can be accessed using <a href="#path-functions">designated built-in functions</a> or returned directly if using a language-specific client.</p> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"MATCH p=(charlie:Actor { name: 'Charlie Sheen' })-[:PLAYED_WITH*1..3]-&gt;(:Actor)
RETURN nodes(p) as actors"</span>
</code></pre></div></div> <p>This query will produce all the paths matching the pattern contained in the named path <code class="language-plaintext highlighter-rouge">p</code>. All of these paths will share the same starting point, the actor node representing Charlie Sheen, but will otherwise vary in length and contents. Though the variable-length traversal and <code class="language-plaintext highlighter-rouge">(:Actor)</code> endpoint are not explicitly aliased, all nodes and edges traversed along the path will be included in <code class="language-plaintext highlighter-rouge">p</code>. In this case, we are only interested in the nodes of each path, which we’ll collect using the built-in function <code class="language-plaintext highlighter-rouge">nodes()</code>. The returned value will contain, in order, Charlie Sheen, between 0 and 2 intermediate nodes, and the unaliased endpoint.</p> <h2 id="all-shortest-paths"> <a href="#all-shortest-paths" class="anchor-heading" aria-labelledby="all-shortest-paths"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> All shortest paths </h2> <p>The <code class="language-plaintext highlighter-rouge">allShortestPaths</code> function returns all the shortest paths between a pair of entities.</p> <p><code class="language-plaintext highlighter-rouge">allShortestPaths()</code> is a MATCH mode in which only the shortest paths matching all criteria are captured. Both the source and the target nodes must be bound in an earlier WITH-demarcated scope to invoke <code class="language-plaintext highlighter-rouge">allShortestPaths()</code>.</p> <div class="table-wrapper"><table> <tbody> <tr> <td>A minimal length (must be 1) and maximal length (must be at least 1) for the search may be specified. Zero or more relationship types may be specified (e.g. [:R</td> <td>Q*1..3]). No property filters may be introduced in the pattern.</td> </tr> </tbody> </table></div> <p><code class="language-plaintext highlighter-rouge">allShortestPaths()</code> can have any number of hops for its minimum and maximum, including zero. This number represents how many edges can be traversed in fulfilling the pattern, with a value of 0 entailing that the source node will be included in the returned path.</p> <p>Filters on properties are supported, and any number of labels may be specified.</p> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"MATCH (charlie:Actor {name: 'Charlie Sheen'}), (kevin:Actor {name: 'Kevin Bacon'})
WITH charlie, kevin
MATCH p=allShortestPaths((charlie)-[:PLAYED_WITH*]-&gt;(kevin))
RETURN nodes(p) as actors"</span>
</code></pre></div></div> <p>This query will produce all paths of the minimum length connecting the actor node representing Charlie Sheen to the one representing Kevin Bacon. There are several 2-hop paths between the two actors, and all of these will be returned. The computation of paths then terminates, as we are not interested in any paths of length greater than 2.</p> <h2 id="single-pair-minimal-weight-bounded-cost-bounded-length-paths"> <a href="#single-pair-minimal-weight-bounded-cost-bounded-length-paths" class="anchor-heading" aria-labelledby="single-pair-minimal-weight-bounded-cost-bounded-length-paths"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Single-Pair minimal-weight bounded-cost bounded-length paths </h2> <p>The <code class="language-plaintext highlighter-rouge">algo.SPpaths</code> procedure returns one, <em>n</em>, or all minimal-weight, [optionally] bounded-cost, [optionally] bounded-length distinct paths between a pair of entities. Each path is a sequence of distinct nodes connected by distinct edges.</p> <p><code class="language-plaintext highlighter-rouge">algo.SPpaths()</code> is a MATCH mode in which only the paths matching all criteria are captured. Both the source and the target nodes must be bound in an earlier WITH-demarcated scope to invoke <code class="language-plaintext highlighter-rouge">algo.SPpaths()</code>.</p> <p>Input arguments:</p> <ul> <li>A map containing: <ul> <li><code class="language-plaintext highlighter-rouge">sourceNode</code>: Mandatory. Must be of type node</li> <li><code class="language-plaintext highlighter-rouge">targetNode</code>: Mandatory. Must be of type node</li> <li><code class="language-plaintext highlighter-rouge">relTypes</code>: Optional. Array of zero or more relationship types. A relationship must have one of these types to be part of the path. If not specified or empty: the path may contain any relationship.</li> <li><code class="language-plaintext highlighter-rouge">relDirection</code>: Optional. string. one of <code class="language-plaintext highlighter-rouge">'incoming'</code>, <code class="language-plaintext highlighter-rouge">'outgoing'</code>, <code class="language-plaintext highlighter-rouge">'both'</code>. If not specified: <code class="language-plaintext highlighter-rouge">'outgoing'</code>.</li> <li> <p><code class="language-plaintext highlighter-rouge">pathCount</code>: Optional. Number of minimal-weight paths to retrieve. Non-negative integer. If not specified: 1</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">0</code>: retrieve all minimal-weight paths (all reported paths have the same weight)</p> <p>Order: 1st : minimal cost, 2nd: minimal length.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">1</code>: retrieve a single minimal-weight path</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> <li> <p><em>n</em> &gt; 1: retrieve up to <em>n</em> minimal-weight paths (reported paths may have different weights)</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">weightProp</code>: Optional. If not specified: use the default weight: 1 for each relationship.</p> <p>The name of the property that represents the weight of each relationship (integer / float)</p> <p>If such property doesn’t exist, of if its value is not a positive numeric - use the default weight: 1</p> <p>Note: when all weights are equal: minimal-weight ≡ shortest-path.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">costProp</code>: Optional. If not specified: use the default cost: 1 for each relationship.</p> <p>The name of the property that represents the cost of each relationship (integer / float)</p> <p>If such property doesn’t exist, or if its value is not a positive numeric - use the default cost: 1</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">maxLen</code>: Optional. Maximal path length (number of relationships along the path). Positive integer.</p> <p>If not specified: no maximal length constraint.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">maxCost</code>: Optional. Positive numeric. If not specified: no maximal cost constraint.</p> <p>The maximal cumulative cost for the relationships along the path.</p> </li> </ul> </li> </ul> <p>Result:</p> <ul> <li> <p>Paths conforming to the input arguments. For each reported path:</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">path</code> - the path</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">pathWeight</code> - the path’s weight</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">pathCost</code> - the path’s cost</p> </li> </ul> <p>To retrieve additional information:</p> <ul> <li> <p>The path’s length can be retrieved with <code class="language-plaintext highlighter-rouge">length(path)</code></p> </li> <li> <p>An array of the nodes along the path can be retrieved with <code class="language-plaintext highlighter-rouge">nodes(path)</code></p> </li> <li> <p>The path’s first node can be retrieved with <code class="language-plaintext highlighter-rouge">nodes(path)[0]</code></p> </li> <li> <p>The path’s last node can be retrieved with <code class="language-plaintext highlighter-rouge">nodes(path)[-1]</code></p> </li> <li> <p>An array of the relationship’s costs along the path can be retrieved with <code class="language-plaintext highlighter-rouge">[r in relationships(path) | r.cost]</code> where cost is the name of the cost property</p> </li> <li> <p>An array of the relationship’s weights along the path can be retrieved with <code class="language-plaintext highlighter-rouge">[r in relationships(path) | r.weight]</code> where weight is the name of the weight property</p> </li> </ul> </li> </ul> <p>Behavior in presence on multiple-edges:</p> <ul> <li> <p>multi-edges are two or more edges connecting the same pair of vertices (possibly with different weights and costs).</p> </li> <li> <p>All matching edges are considered. Paths with identical vertices and different edges are different paths. The following are 3 different paths (‘n1’, ‘n2’, and ‘n3’ are nodes; ‘e1’, ‘e2’, ‘e3’, and ‘e4’ are edges): (n1)-[e1]-(n2)-[e2]-(n3), (n1)-[e1]-(n2)-[e3]-(n3), (n1)-[e4]-(n2)-[e3]-(n3)</p> </li> </ul> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH 
<span class="s2">"MATCH (s:Actor {name: 'Charlie Sheen'}), (t:Actor {name: 'Kevin Bacon'}) 
CALL algo.SPpaths( {sourceNode: s, targetNode: t, relTypes: ['r1', 'r2', 'r3'], relDirection: 'outgoing', pathCount: 1, weightProp: 'weight', costProp: 'cost', maxLen: 3, maxCost: 100} ) 
YIELD path, pathCost, pathWeight
RETURN path ORDER BY pathCost"</span>
</code></pre></div></div> <h2 id="single-source-minimal-weight-bounded-cost-bounded-length-paths"> <a href="#single-source-minimal-weight-bounded-cost-bounded-length-paths" class="anchor-heading" aria-labelledby="single-source-minimal-weight-bounded-cost-bounded-length-paths"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Single-Source minimal-weight bounded-cost bounded-length paths </h2> <p>The <code class="language-plaintext highlighter-rouge">algo.SSpaths</code> procedure returns one, <em>n</em>, or all minimal-weight, [optionally] bounded-cost, [optionally] bounded-length distinct paths from a given entity. Each path is a sequence of distinct nodes connected by distinct edges.</p> <p><code class="language-plaintext highlighter-rouge">algo.SSpaths()</code> is a MATCH mode in which only the paths matching all criteria are captured. The source node must be bound in an earlier WITH-demarcated scope to invoke <code class="language-plaintext highlighter-rouge">algo.SSpaths()</code>.</p> <p>Input arguments:</p> <ul> <li>A map containing: <ul> <li><code class="language-plaintext highlighter-rouge">sourceNode</code>: Mandatory. Must be of type node</li> <li><code class="language-plaintext highlighter-rouge">relTypes</code>: Optional. Array of zero or more relationship types. A relationship must have one of these types to be part of the path. If not specified or empty: the path may contain any relationship.</li> <li><code class="language-plaintext highlighter-rouge">relDirection</code>: Optional. string. one of <code class="language-plaintext highlighter-rouge">'incoming'</code>, <code class="language-plaintext highlighter-rouge">'outgoing'</code>, <code class="language-plaintext highlighter-rouge">'both'</code>. If not specified: <code class="language-plaintext highlighter-rouge">'outgoing'</code>.</li> <li> <p><code class="language-plaintext highlighter-rouge">pathCount</code>: Optional. Number of minimal-weight paths to retrieve. Non-negative integer. If not specified: 1</p> <p>This number is global (not per source-target pair); all returned paths may be with the same target.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">0</code>: retrieve all minimal-weight paths (all reported paths have the same weight)</p> <p>Order: 1st : minimal cost, 2nd: minimal length.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">1</code>: retrieve a single minimal-weight path</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> <li> <p><em>n</em> &gt; 1: retrieve up to <em>n</em> minimal-weight paths (reported paths may have different weights)</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">weightProp</code>: Optional. If not specified: use the default weight: 1 for each relationship.</p> <p>The name of the property that represents the weight of each relationship (integer / float)</p> <p>If such property doesn’t exist, of if its value is not a positive numeric - use the default weight: 1</p> <p>Note: when all weights are equal: minimal-weight ≡ shortest-path.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">costProp</code>: Optional. If not specified: use the default cost: 1 for each relationship.</p> <p>The name of the property that represents the cost of each relationship (integer / float)</p> <p>If such property doesn’t exist, or if its value is not a positive numeric - use the default cost: 1</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">maxLen</code>: Optional. Maximal path length (number of relationships along the path). Positive integer.</p> <p>If not specified: no maximal length constraint.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">maxCost</code>: Optional. Positive numeric. If not specified: no maximal cost constraint.</p> <p>The maximal cumulative cost for the relationships along the path.</p> </li> </ul> </li> </ul> <p>Result:</p> <ul> <li>Paths conforming to the input arguments. For each reported path: <ul> <li><code class="language-plaintext highlighter-rouge">path</code> - the path</li> <li><code class="language-plaintext highlighter-rouge">pathWeight</code> - the path’s weight</li> <li><code class="language-plaintext highlighter-rouge">pathCost</code> - the path’s cost</li> </ul> <p>To retrieve additional information:</p> <ul> <li>The path’s length can be retrieved with <code class="language-plaintext highlighter-rouge">length(path)</code></li> <li>An array of the nodes along the path can be retrieved with <code class="language-plaintext highlighter-rouge">nodes(path)</code></li> <li>The path’s first node can be retrieved with <code class="language-plaintext highlighter-rouge">nodes(path)[0]</code></li> <li>The path’s last node can be retrieved with <code class="language-plaintext highlighter-rouge">nodes(path)[-1]</code></li> <li>An array of the relationship’s costs along the path can be retrieved with <code class="language-plaintext highlighter-rouge">[r in relationships(path) | r.cost]</code> where cost is the name of the cost property</li> <li>An array of the relationship’s weights along the path can be retrieved with <code class="language-plaintext highlighter-rouge">[r in relationships(path) | r.weight]</code> where weight is the name of the weight property</li> </ul> </li> </ul> <h2 id="behavior-in-presence-on-multiple-edges"> <a href="#behavior-in-presence-on-multiple-edges" class="anchor-heading" aria-labelledby="behavior-in-presence-on-multiple-edges"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Behavior in presence on multiple-edges: </h2> <ul> <li>multi-edges are two or more edges connecting the same pair of vertices (possibly with different weights and costs).</li> <li>All matching edges are considered. Paths with identical vertices and different edges are different paths. The following are 3 different paths (‘n1’, ‘n2’, and ‘n3’ are nodes; ‘e1’, ‘e2’, ‘e3’, and ‘e4’ are edges): (n1)-[e1]-(n2)-[e2]-(n3), (n1)-[e1]-(n2)-[e3]-(n3), (n1)-[e4]-(n2)-[e3]-(n3)</li> </ul> <p>Example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH 
<span class="s2">"MATCH (s:Actor {name: 'Charlie Sheen'})
CALL algo.SSpaths( {sourceNode: s, relTypes: ['r1', 'r2', 'r3'], relDirection: 'outgoing', pathCount: 1, weightProp: 'weight', costProp: 'cost', maxLen: 3, maxCost: 100} ) 
YIELD path, pathCost, pathWeight
RETURN path ORDER BY pathCost"</span>
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
