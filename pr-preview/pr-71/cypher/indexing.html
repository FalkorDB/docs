<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(20)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(8) > ul > li:nth-child(20) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(8) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(8) > ul > li:nth-child(20) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(8) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(8) > ul.nav-list > li.nav-list-item:nth-child(20) > ul.nav-list { display: block; } </style> <script async src="https://www.googletagmanager.com/gtag/js?id=G-0V4CX90653"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-0V4CX90653'); </script> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Indexing | FalkorDB Docs</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Indexing" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="FalkorDB supports single-property indexes for node labels and for relationship type. String, numeric, and geospatial data types can be indexed." /> <meta property="og:description" content="FalkorDB supports single-property indexes for node labels and for relationship type. String, numeric, and geospatial data types can be indexed." /> <link rel="canonical" href="https://docs.falkordb.com/cypher/indexing.html" /> <meta property="og:url" content="https://docs.falkordb.com/cypher/indexing.html" /> <meta property="og:site_name" content="FalkorDB Docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Indexing" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"FalkorDB supports single-property indexes for node labels and for relationship type. String, numeric, and geospatial data types can be indexed.","headline":"Indexing","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.falkordb.com/images/falkor-logo.png"}},"url":"https://docs.falkordb.com/cypher/indexing.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="FalkorDB Docs"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/configuration.html" class="nav-list-link">Configuration Parameters</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Commands category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/commands/" class="nav-list-link">Commands</a><ul class="nav-list"><li class="nav-list-item"><a href="/commands/graph.query.html" class="nav-list-link">GRAPH.QUERY</a></li><li class="nav-list-item"><a href="/commands/graph.ro_query.html" class="nav-list-link">GRAPH.RO_QUERY</a></li><li class="nav-list-item"><a href="/commands/graph.delete.html" class="nav-list-link">GRAPH.DELETE</a></li><li class="nav-list-item"><a href="/commands/graph.explain.html" class="nav-list-link">GRAPH.EXPLAIN</a></li><li class="nav-list-item"><a href="/commands/graph.list.html" class="nav-list-link">GRAPH.LIST</a></li><li class="nav-list-item"><a href="/commands/graph.profile.html" class="nav-list-link">GRAPH.PROFILE</a></li><li class="nav-list-item"><a href="/commands/graph.config-get.html" class="nav-list-link">GRAPH.CONFIG-GET</a></li><li class="nav-list-item"><a href="/commands/graph.config-set.html" class="nav-list-link">GRAPH.CONFIG-SET</a></li><li class="nav-list-item"><a href="/commands/graph.constraint-create.html" class="nav-list-link">GRAPH.CONSTRAINT CREATE</a></li><li class="nav-list-item"><a href="/commands/graph.constraint-drop.html" class="nav-list-link">GRAPH.CONSTRAINT DROP</a></li><li class="nav-list-item"><a href="/commands/graph.copy.html" class="nav-list-link">GRAPH.COPY</a></li><li class="nav-list-item"><a href="/commands/graph.info.html" class="nav-list-link">GRAPH.INFO</a></li><li class="nav-list-item"><a href="/commands/graph.slowlog.html" class="nav-list-link">GRAPH.SLOWLOG</a></li></ul></li><li class="nav-list-item"><a href="/clients.html" class="nav-list-link">Client Libraries</a></li><li class="nav-list-item"><a href="/datatypes.html" class="nav-list-link">Data types</a></li><li class="nav-list-item"><a href="/path_algorithm.html" class="nav-list-link">Path algorithms</a></li><li class="nav-list-item"><a href="/docker-examples/README.html" class="nav-list-link">Building Docker</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cypher Language category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/cypher/" class="nav-list-link">Cypher Language</a><ul class="nav-list"><li class="nav-list-item"><a href="/cypher/match.html" class="nav-list-link">MATCH</a></li><li class="nav-list-item"><a href="/cypher/optional_match.html" class="nav-list-link">OPTIONAL MATCH</a></li><li class="nav-list-item"><a href="/cypher/where.html" class="nav-list-link">WHERE</a></li><li class="nav-list-item"><a href="/cypher/return.html" class="nav-list-link">RETURN</a></li><li class="nav-list-item"><a href="/cypher/order_by.html" class="nav-list-link">ORDER BY</a></li><li class="nav-list-item"><a href="/cypher/skip.html" class="nav-list-link">SKIP</a></li><li class="nav-list-item"><a href="/cypher/limit.html" class="nav-list-link">LIMIT</a></li><li class="nav-list-item"><a href="/cypher/create.html" class="nav-list-link">CREATE</a></li><li class="nav-list-item"><a href="/cypher/delete.html" class="nav-list-link">DELETE</a></li><li class="nav-list-item"><a href="/cypher/set.html" class="nav-list-link">SET</a></li><li class="nav-list-item"><a href="/cypher/merge.html" class="nav-list-link">MERGE</a></li><li class="nav-list-item"><a href="/cypher/with.html" class="nav-list-link">WITH</a></li><li class="nav-list-item"><a href="/cypher/union.html" class="nav-list-link">UNION</a></li><li class="nav-list-item"><a href="/cypher/unwind.html" class="nav-list-link">UNWIND</a></li><li class="nav-list-item"><a href="/cypher/foreach.html" class="nav-list-link">FOREACH</a></li><li class="nav-list-item"><a href="/cypher/call.html" class="nav-list-link">CALL</a></li><li class="nav-list-item"><a href="/cypher/functions.html" class="nav-list-link">Functions</a></li><li class="nav-list-item"><a href="/cypher/procedures.html" class="nav-list-link">Procedures</a></li><li class="nav-list-item"><a href="/cypher/algorithms.html" class="nav-list-link">Algorithms</a></li><li class="nav-list-item"><a href="/cypher/indexing.html" class="nav-list-link">Indexing</a></li><li class="nav-list-item"><a href="/cypher/cypher_support.html" class="nav-list-link">Cypher coverage</a></li><li class="nav-list-item"><a href="/cypher/known_limitations.html" class="nav-list-link">Known limitations</a></li></ul></li><li class="nav-list-item"><a href="/llm_support.html" class="nav-list-link">LLM frameworks support</a></li><li class="nav-list-item"><a href="/bolt_support.html" class="nav-list-link">BOLT protocol support</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Operations category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/operations/" class="nav-list-link">Operations</a><ul class="nav-list"><li class="nav-list-item"><a href="/operations/persistence.html" class="nav-list-link">Persistence</a></li><li class="nav-list-item"><a href="/operations/replication.html" class="nav-list-link">Replication</a></li><li class="nav-list-item"><a href="/operations/cluster.html" class="nav-list-link">Cluster</a></li><li class="nav-list-item"><a href="/operations/k8s_support.html" class="nav-list-link">Kubernetes support</a></li></ul></li><li class="nav-list-item"><a href="/management/" class="nav-list-link">Management</a></li><li class="nav-list-item"><a href="/redisgraph-to-falkordb.html" class="nav-list-link">RedisGraph to FalkorDB</a></li><li class="nav-list-item"><a href="/References.html" class="nav-list-link">References</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The FalkorDB Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/design/" class="nav-list-link">The FalkorDB Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/design/client_spec.html" class="nav-list-link">Client Specification</a></li><li class="nav-list-item"><a href="/design/bulk_spec.html" class="nav-list-link">GRAPH.BULK endpoint specification</a></li><li class="nav-list-item"><a href="/design/result_structure.html" class="nav-list-link">Result Set Structure</a></li></ul></li><li class="nav-list-item"><a href="/management/persistence.html" class="nav-list-link">Persistence</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search FalkorDB Docs" aria-label="Search FalkorDB Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/falkordb/docs" class="site-button" target="_blank" rel="noopener noreferrer" > Docs Repository </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/falkordb/falkordb" class="site-button" target="_blank" rel="noopener noreferrer" > FalkorDB Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/cypher/">Cypher Language</a></li> <li class="breadcrumb-nav-list-item"><span>Indexing</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="indexing"> <a href="#indexing" class="anchor-heading" aria-labelledby="indexing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Indexing </h1> <p>FalkorDB supports single-property indexes for node labels and for relationship type. String, numeric, and geospatial data types can be indexed.</p> <h2 id="creating-an-index-for-a-node-label"> <a href="#creating-an-index-for-a-node-label" class="anchor-heading" aria-labelledby="creating-an-index-for-a-node-label"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating an index for a node label </h2> <p>For a node label, the index creation syntax is:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CREATE INDEX FOR (p:Person) ON (p.age)"</span>
</code></pre></div></div> <p>An old syntax is also supported:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CREATE INDEX ON :Person(age)"</span>
</code></pre></div></div> <p>After an index is explicitly created, it will automatically be used by queries that reference that label and any indexed property in a filter.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.EXPLAIN DEMO_GRAPH <span class="s2">"MATCH (p:Person) WHERE p.age &gt; 80 RETURN p"</span>
1<span class="o">)</span> <span class="s2">"Results"</span>
2<span class="o">)</span> <span class="s2">"    Project"</span>
3<span class="o">)</span> <span class="s2">"        Index Scan | (p:Person)"</span>
</code></pre></div></div> <p>This can significantly improve the runtime of queries with very specific filters. An index on <code class="language-plaintext highlighter-rouge">:employer(name)</code>, for example, will dramatically benefit the query:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"MATCH (:Employer {name: 'Dunder Mifflin'})-[:EMPLOYS]-&gt;(p:Person) RETURN p"</span>
</code></pre></div></div> <p>An example of utilizing a geospatial index to find <code class="language-plaintext highlighter-rouge">Employer</code> nodes within 5 kilometers of Scranton are:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"WITH point({latitude:41.4045886, longitude:-75.6969532}) AS scranton MATCH (e:Employer) WHERE distance(e.location, scranton) &lt; 5000 RETURN e"</span>
</code></pre></div></div> <p>Geospatial indexes can currently only be leveraged with <code class="language-plaintext highlighter-rouge">&lt;</code> and <code class="language-plaintext highlighter-rouge">&lt;=</code> filters; matching nodes outside of the given radius is performed using conventional matching.</p> <h2 id="creating-an-index-for-a-relationship-type"> <a href="#creating-an-index-for-a-relationship-type" class="anchor-heading" aria-labelledby="creating-an-index-for-a-relationship-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating an index for a relationship type </h2> <p>For a relationship type, the index creation syntax is:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CREATE INDEX FOR ()-[f:FOLLOW]-() ON (f.created_at)"</span>
</code></pre></div></div> <p>Then the execution plan for using the index:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.EXPLAIN DEMO_GRAPH <span class="s2">"MATCH (p:Person {id: 0})-[f:FOLLOW]-&gt;(fp) WHERE 0 &lt; f.created_at AND f.created_at &lt; 1000 RETURN fp"</span>
1<span class="o">)</span> <span class="s2">"Results"</span>
2<span class="o">)</span> <span class="s2">"    Project"</span>
3<span class="o">)</span> <span class="s2">"        Edge By Index Scan | [f:FOLLOW]"</span>
4<span class="o">)</span> <span class="s2">"            Node By Index Scan | (p:Person)"</span>
</code></pre></div></div> <p>This can significantly improve the runtime of queries that traverse super nodes or when we want to start traverse from relationships.</p> <h2 id="deleting-an-index-for-a-node-label"> <a href="#deleting-an-index-for-a-node-label" class="anchor-heading" aria-labelledby="deleting-an-index-for-a-node-label"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deleting an index for a node label </h2> <p>For a node label, the index deletion syntax is:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"DROP INDEX ON :Person(age)"</span>
</code></pre></div></div> <h2 id="deleting-an-index-for-a-relationship-type"> <a href="#deleting-an-index-for-a-relationship-type" class="anchor-heading" aria-labelledby="deleting-an-index-for-a-relationship-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deleting an index for a relationship type </h2> <p>For a relationship type, the index deletion syntax is:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"DROP INDEX ON :FOLLOW(created_at)"</span>
</code></pre></div></div> <h1 id="full-text-indexing"> <a href="#full-text-indexing" class="anchor-heading" aria-labelledby="full-text-indexing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Full-text indexing </h1> <p>FalkorDB leverages the indexing capabilities of <a href="https://redis.io/docs/interact/search-and-query/">RediSearch</a> to provide full-text indices through procedure calls.</p> <h2 id="creating-a-full-text-index-for-a-node-label"> <a href="#creating-a-full-text-index-for-a-node-label" class="anchor-heading" aria-labelledby="creating-a-full-text-index-for-a-node-label"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a full-text index for a node label </h2> <p>To construct a full-text index on the <code class="language-plaintext highlighter-rouge">title</code> property of all nodes with label <code class="language-plaintext highlighter-rouge">Movie</code>, use the syntax:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CALL db.idx.fulltext.createNodeIndex('Movie', 'title')"</span>
</code></pre></div></div> <p>More properties can be added to this index by adding their names to the above set of arguments, or using this syntax again with the additional names.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CALL db.idx.fulltext.createNodeIndex('Person', 'firstName', 'lastName')"</span>
</code></pre></div></div> <p>RediSearch provide 2 index configuration options:</p> <ol> <li>Language - Define which language to use for stemming text, which is adding the base form of a word to the index. This allows the query for “going” to also return results for “go” and “gone”, for example.</li> <li>Stopwords - These are words that are usually so common that they do not add much information to search, but take up a lot of space and CPU time in the index.</li> </ol> <p>To construct a full-text index on the <code class="language-plaintext highlighter-rouge">title</code> property using <code class="language-plaintext highlighter-rouge">German</code> language and using custom stopwords of all nodes with label <code class="language-plaintext highlighter-rouge">Movie</code>, use the syntax:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CALL db.idx.fulltext.createNodeIndex({ label: 'Movie', language: 'German', stopwords: ['a', 'ab'] }, 'title')"</span>
</code></pre></div></div> <p>RediSearch provide 3 additional field configuration options:</p> <ol> <li>Weight - The importance of the text in the field</li> <li>Nostem - Skip stemming when indexing text</li> <li>Phonetic - Enable phonetic search on the text</li> </ol> <p>To construct a full-text index on the <code class="language-plaintext highlighter-rouge">title</code> property with phonetic search of all nodes with label <code class="language-plaintext highlighter-rouge">Movie</code>, use the syntax:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CALL db.idx.fulltext.createNodeIndex('Movie', {field: 'title', phonetic: 'dm:en'})"</span>
</code></pre></div></div> <h2 id="utilizing-a-full-text-index-for-a-node-label"> <a href="#utilizing-a-full-text-index-for-a-node-label" class="anchor-heading" aria-labelledby="utilizing-a-full-text-index-for-a-node-label"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Utilizing a full-text index for a node label </h2> <p>An index can be invoked to match any whole words contained within:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"CALL db.idx.fulltext.queryNodes('Movie', 'Book') YIELD node RETURN node.title"</span>
1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"node.title"</span>
2<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"The Jungle Book"</span>
   2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"The Book of Life"</span>
3<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"Query internal execution time: 0.927409 milliseconds"</span>
</code></pre></div></div> <p>This CALL clause can be interleaved with other Cypher clauses to perform more elaborate manipulations:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"CALL db.idx.fulltext.queryNodes('Movie', 'Book') YIELD node AS m
WHERE m.genre = 'Adventure'
RETURN m ORDER BY m.rating"</span>
1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"m"</span>
2<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"id"</span>
            2<span class="o">)</span> <span class="o">(</span>integer<span class="o">)</span> 1168
         2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"labels"</span>
            2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"Movie"</span>
         3<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"properties"</span>
            2<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"genre"</span>
                  2<span class="o">)</span> <span class="s2">"Adventure"</span>
               2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"rating"</span>
                  2<span class="o">)</span> <span class="s2">"7.6"</span>
               3<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"votes"</span>
                  2<span class="o">)</span> <span class="o">(</span>integer<span class="o">)</span> 151342
               4<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"year"</span>
                  2<span class="o">)</span> <span class="o">(</span>integer<span class="o">)</span> 2016
               5<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"title"</span>
                  2<span class="o">)</span> <span class="s2">"The Jungle Book"</span>
3<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"Query internal execution time: 0.226914 milliseconds"</span>
</code></pre></div></div> <p>In addition to yielding matching nodes, full-text index scans will return the score of each node. This is the <a href="https://redis.io/docs/interact/search-and-query/advanced-concepts/scoring/#tfidf-default">TF-IDF</a> score of the node, which is informed by how many times the search terms appear in the node and how closely grouped they are. This can be observed in the example:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH
<span class="s2">"CALL db.idx.fulltext.queryNodes('Node', 'hello world') YIELD node, score RETURN score, node.val"</span>
1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"score"</span>
   2<span class="o">)</span> <span class="s2">"node.val"</span>
2<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"2"</span>
      2<span class="o">)</span> <span class="s2">"hello world"</span>
   2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"1"</span>
      2<span class="o">)</span> <span class="s2">"hello to a different world"</span>
3<span class="o">)</span> 1<span class="o">)</span> <span class="s2">"Cached execution: 1"</span>
   2<span class="o">)</span> <span class="s2">"Query internal execution time: 0.335401 milliseconds"</span>
</code></pre></div></div> <h2 id="deleting-a-full-text-index-for-a-node-label"> <a href="#deleting-a-full-text-index-for-a-node-label" class="anchor-heading" aria-labelledby="deleting-a-full-text-index-for-a-node-label"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deleting a full-text index for a node label </h2> <p>For a node label, the full-text index deletion syntax is:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAPH.QUERY DEMO_GRAPH <span class="s2">"CALL db.idx.fulltext.drop('Movie')"</span>
</code></pre></div></div> <h1 id="vector-indexing"> <a href="#vector-indexing" class="anchor-heading" aria-labelledby="vector-indexing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vector indexing </h1> <p>With the introduction of the <code class="language-plaintext highlighter-rouge">vector</code> data-type a new type of index was introduced. A vector index is a dedicated index for indexing and searching through vectors.</p> <p>To create this type of index use the following syntax:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">VECTOR</span> <span class="k">INDEX</span> <span class="n">FOR</span> <span class="o">&lt;</span><span class="n">entity_pattern</span><span class="o">&gt;</span> <span class="k">ON</span> <span class="o">&lt;</span><span class="n">entity_attribute</span><span class="o">&gt;</span> <span class="n">OPTIONS</span> <span class="o">&lt;</span><span class="n">options</span><span class="o">&gt;</span>
</code></pre></div></div> <p>The options are:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
   dimension: INT, // Requiered, length of the vector to be indexed
   similarityFunction: STRING, // Requiered, currently only euclidean or cosine are allowed
   M: INT, // Optional, maximum number of outgoing edges per node. default 16
   efConstruction: INT, // Optional, number of candidates during construction. default 200
   efRuntime: INT // Optional, number of candidates during search. default 10
}
</code></pre></div></div> <p>For example, to create a vector index over all <code class="language-plaintext highlighter-rouge">Product</code> nodes <code class="language-plaintext highlighter-rouge">description</code> attribute use the following syntax:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">VECTOR</span> <span class="k">INDEX</span> <span class="n">FOR</span><span class="w"> </span><span class="ss">(</span><span class="py">p:</span><span class="n">Product</span><span class="ss">)</span> <span class="k">ON</span><span class="w"> </span><span class="ss">(</span><span class="n">p.description</span><span class="ss">)</span> <span class="n">OPTIONS</span> <span class="ss">{</span><span class="nl">dimension</span><span class="dl">:</span><span class="m">128</span><span class="ss">,</span> <span class="py">similarityFunction:</span><span class="s1">'euclidean'</span><span class="ss">}</span>
</code></pre></div></div> <p>Similarly to create a vector index over all <code class="language-plaintext highlighter-rouge">Call</code> relationships <code class="language-plaintext highlighter-rouge">summary</code> attribute use the following syntax:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">VECTOR</span> <span class="k">INDEX</span> <span class="n">FOR</span><span class="w"> </span><span class="ss">()</span><span class="o">-</span><span class="ss">[</span><span class="py">e:</span><span class="k">Call</span><span class="ss">]</span><span class="o">-&gt;</span><span class="ss">()</span> <span class="k">ON</span><span class="w"> </span><span class="ss">(</span><span class="n">e.summary</span><span class="ss">)</span> <span class="n">OPTIONS</span> <span class="ss">{</span><span class="nl">dimension</span><span class="dl">:</span><span class="m">128</span><span class="ss">,</span> <span class="py">similarityFunction:</span><span class="s1">'euclidean'</span><span class="ss">}</span>
</code></pre></div></div> <p>Please note, when creating a vector index, both the vector dimension and similarity function must be provided. At the moment the only supported similarity function is ‘euclidean’.</p> <h2 id="inserting-vectors"> <a href="#inserting-vectors" class="anchor-heading" aria-labelledby="inserting-vectors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inserting vectors </h2> <p>To create a new vector use the <a href="/cypher/functions#vector-functions">vecf32</a> function as follows:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span><span class="w"> </span><span class="ss">(</span><span class="py">p:</span> <span class="n">Product</span> <span class="ss">{</span><span class="py">description:</span> <span class="n">vecf32</span><span class="ss">([</span><span class="mf">2.1</span><span class="ss">,</span> <span class="mf">0.82</span><span class="ss">,</span> <span class="mf">1.3</span><span class="ss">])})</span>
</code></pre></div></div> <p>The above query creates a new <code class="language-plaintext highlighter-rouge">Product</code> node with a <code class="language-plaintext highlighter-rouge">description</code> attribute containing a vector.</p> <h2 id="query-vector-index"> <a href="#query-vector-index" class="anchor-heading" aria-labelledby="query-vector-index"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Query vector index </h2> <p>Vector indices are used to search for similar vectors to a given query vector using the similarity function as a measure of “distance”.</p> <p>To query the index use either <code class="language-plaintext highlighter-rouge">db.idx.vector.queryNodes</code> for node retrieval or <code class="language-plaintext highlighter-rouge">db.idx.vector.queryRelationships</code> for relationships.</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CALL</span> <span class="n">db.idx.vector.queryNodes</span><span class="ss">(</span>
    <span class="py">label:</span> <span class="n">STRING</span><span class="ss">,</span>
    <span class="py">attribute:</span> <span class="n">STRING</span><span class="ss">,</span>
    <span class="py">k:</span> <span class="n">INTEGER</span><span class="ss">,</span>
    <span class="py">query:</span> <span class="n">VECTOR</span>
<span class="ss">)</span> <span class="k">YIELD</span> <span class="n">node</span><span class="ss">,</span> <span class="n">score</span>
</code></pre></div></div> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CALL</span> <span class="n">db.idx.vector.queryRelationships</span><span class="ss">(</span>
    <span class="py">relationshipType:</span> <span class="n">STRING</span><span class="ss">,</span>
    <span class="py">attribute:</span> <span class="n">STRING</span><span class="ss">,</span>
    <span class="py">k:</span> <span class="n">INTEGER</span><span class="ss">,</span>
    <span class="py">query:</span> <span class="n">VECTOR</span>
<span class="ss">)</span> <span class="k">YIELD</span> <span class="n">relationship</span><span class="ss">,</span> <span class="n">score</span>
</code></pre></div></div> <p>To query up to 10 similar <code class="language-plaintext highlighter-rouge">Product</code> descriptions to a given query description vector issue the following procedure call:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CALL</span> <span class="n">db.idx.vector.queryNodes</span><span class="ss">(</span>
    <span class="s1">'Product'</span><span class="ss">,</span>
    <span class="s1">'description'</span><span class="ss">,</span>
    <span class="mi">10</span><span class="ss">,</span>
    <span class="n">vecf32</span><span class="ss">(</span><span class="o">&lt;</span><span class="n">array_of_vector_elements</span><span class="o">&gt;</span><span class="ss">),</span>
    <span class="ss">)</span> <span class="k">YIELD</span> <span class="n">node</span>
</code></pre></div></div> <p>The procedure can yield both the indexed entity assigned to the found similar vector in addition to a similarity score of that entity.</p> <h2 id="deleting-a-vector-index"> <a href="#deleting-a-vector-index" class="anchor-heading" aria-labelledby="deleting-a-vector-index"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deleting a vector index </h2> <p>To remove a vector index, simply issue the <code class="language-plaintext highlighter-rouge">drop index</code> command as follows:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="n">VECTOR</span> <span class="k">INDEX</span> <span class="n">FOR</span> <span class="o">&lt;</span><span class="n">entity_pattern</span><span class="o">&gt;</span> <span class="ss">(</span><span class="o">&lt;</span><span class="n">entity_attribute</span><span class="o">&gt;</span><span class="ss">)</span>
</code></pre></div></div> <p>For example, to drop the vector index over Product description, invoke:</p> <div class="language-cypher highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="n">VECTOR</span> <span class="k">INDEX</span> <span class="n">FOR</span><span class="w"> </span><span class="ss">(</span><span class="py">p:</span><span class="n">Product</span><span class="ss">)</span> <span class="k">ON</span><span class="w"> </span><span class="ss">(</span><span class="n">p.description</span><span class="ss">)</span>
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
